<app-navbar></app-navbar>
<div class="container">
  <div class="d-flex flex-column">
    <div class="mt-3 flex-fill flex-grow-1 zIndex">
      <input [ngClass]="{'form-no-bottom':value&&searchedPaginatedBooks.nrOfElements > 0}" [(ngModel)]="value" class="form-control shadow-none" type="text" placeholder="Search" aria-label="Search"
             (ngModelChange)="inputSearchChanged()">


      <div class="position-fixed container bg-white" *ngIf=" value != '' && value && flagSearch && searchedPaginatedBooks.nrOfElements > 0">
        <table>
          <tr class="btn-link" [routerLink]="['../book-page']" [queryParams]="{'bookId': book.id}" *ngFor="let book of searchedBooks | paginate: { id: 'searchPagination', itemsPerPage: 5, currentPage: q, totalItems: searchedPaginatedBooks.nrOfElements}">
            <td style="width: 10%;">{{book.title}}</td>
          </tr>
        </table>
      </div>
    </div>

  </div>

    <div *ngIf="paginatedBooks" class="container-widget justify-content-around mt-3">
      <div *ngFor="let book of books | paginate: { id: 'gridPagination1',itemsPerPage: 3, currentPage: p,totalItems: paginatedBooks.nrOfElements}">
        <div>
          <book-grid-icon (bookBorrowed)="bookBorrowed($event)" class="widget" [book]="book"></book-grid-icon>
        </div>
      </div>
    </div>
    <div *ngIf="formData">
      {{formData}}
    </div>
  <div class="text-center">
    <pagination-controls  id="gridPagination1" (pageChange)="pageGridChangedOnPaginate($event)"></pagination-controls>

  </div>

  <!-- <div>{{recommendedBooks | json}}</div> -->
  <div class="recommend"> <p>Books we recommend based on your favorite genres:</p></div>
  <br>
  <div *ngIf="recommendedBooks" class="container-widget justify-content-around mt-3">
      <div *ngFor="let book of recommendedBooks | paginate: { id: 'gridPagination2',itemsPerPage: 3, currentPage: currentRecommendPage,totalItems: recommendedBooksSearch.totalElements}">
        <div>
          <book-grid-icon (bookBorrowed)="bookBorrowed($event)" class="widget" [book]="book"></book-grid-icon>
        </div>
      </div>
    </div>
    <div *ngIf="formData">
      {{formData}}
    </div>
  <div class="text-center">
  <pagination-controls  id="gridPagination2" (pageChange)="pageGridChangedOnRecommend($event)"></pagination-controls>

  </div>

  <div class="shadowed mb-3" id="chartContainer" style="height: 370px; width: 100%;"></div>

  <div class="shadowed mb-3" id="chartContainerPie" style="height: 370px; width: 100%;"></div>

<!--  <div class="shadowed mb-3" id="chartContainer" style="height: 370px; width: 100%;"></div>-->
<!--  <div class="shadowed mb-3" id="chartContainerPie" style="height: 370px; width: 100%;"></div>-->
</div>








